import PPoWBlockchainFork from 'common/blockchain/ppow-blockchain/blockchain/forks/PPoW-Blockchain-Fork'
import InterfaceBlockchainFork from 'common/blockchain/interface-blockchain/blockchain/forks/Interface-Blockchain-Fork'
import consts from 'consts/const_global'
import InterfaceBlockchainBlockValidation from 'common/blockchain/interface-blockchain/blocks/validation/Interface-Blockchain-Block-Validation'

let inheritFork
if (consts.POPOW_PARAMS.ACTIVATED) inheritFork = PPoWBlockchainFork
else inheritFork = InterfaceBlockchainFork

class MiniBlockchainFork extends inheritFork {
  /**
     * Fork Validation for Mini Blockchain is not checking the Accountant Tree
     */
  _createBlockValidation_ForkValidation (height, forkHeight) {
    let validationType = {
      'skip-accountant-tree-validation': true,
      'skip-validation-transactions-from-values': true // can not validate the transactions
    }

    return new InterfaceBlockchainBlockValidation(this.getForkBlock.bind(this), this.getForkDifficultyTarget.bind(this), this.getForkTimeStamp.bind(this), this.getForkHash.bind(this), this.getForkChainHash.bind(this), validationType)
  }
}

export default MiniBlockchainFork
